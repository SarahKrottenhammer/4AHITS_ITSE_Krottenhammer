Klasse: 4AHITS   
Name: Sarah Krottenhammer   
Fach: ITSE    
Datum: 03.11.2025   

# Thema: Port probing und scanning
## Übung 1: port probing
**Angabe:**   
Beim port probing möchte man herausfinden ob auf einem gewissen port ein Dienst läuft, welcher Dienst dies ist und (wenn möglich) mehr Details wie z.B. Versionsnummern. Diese Information dient als Basis für weitere Angriffe.

telnet, nc (netcat) und curl sind einfache Tools die zum port probing verwendet werden können. Teilweise ist es auch möglich die kontaktierten Dienste dazu zu veranlassen mehr Informationen über sich preiszugeben (banner grabbing).

- Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft
- Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus.   
  Auf 3 Arten:   
  - Verwende telnet
  - Verwende nc (netcat)
    - Hinweis: der notwendige http request header kann am besten mit Hilfe eines Shell here-documents beschrieben werden.
  - Verwende curl
- Erstelle ein port probing cheat sheet für alle 3 Tools

### 1. Verwende telnet um festzustellen ob ein ssh Server auf Metasploitable läuft
Dies kann mit dem Befehl `telnet 192.168.17.51 22` umgesetzt werden.   
Man verwendet dabei die IP-Adresse der Metasploitable-VM und den SSH-Port 22.   
![](https://github.com/user-attachments/assets/1cb7f032-f1c9-4a08-a514-bc88433573d6)

### 2. Finde Bezeichnung und die Versionsnummer des Web Servers auf Metasploitable heraus.
#### Mit telnet
Man muss, nach dem die Verbindung steht, eine HTTP-Anfrage machen. Mit 2 Leerzeilen beendet man die Anfrage und bekommt einen HTTP-Header zurück.    
Die Anfrage sieht so aus:   
![](https://github.com/user-attachments/assets/98c679d7-4811-4026-8e4e-fe17dc9b1554)   
 Bezeichnung des Servers: Apache   
 Version des Servers: 2.2.8   

#### Mit nc (netcad)
Dies wurde mit Hilfe eines shell-here-documents umgesetzt:   
```
$ nc 192.168.17.51 80 << EOF
HEAD / HTTP/1.0
Host: 192.168.17.51
Connection: close


EOF
```

 ![](https://github.com/user-attachments/assets/f5c37c70-f4c5-42e6-a492-aa2bcc82f9e4)   
 Die Bezeichnung des Servers und die Version bleiben gleich. 

#### Mit curl     
Anhand des Befehls `curl -I http://192.168.17.51/`   
![](https://github.com/user-attachments/assets/8c5881d4-3722-49f8-817b-0ca2b6e8fcb8)   

### 3. Erstelle ein port probing cheat sheet für alle 3 Tools
<table border="1" cellpadding="8" cellspacing="0">
<thead>
<tr>
<th>Tool</th>
<th>Zweck</th>
<th>Befehle (Beispiel IP <code>192.168.17.51</code>)</th>
<th>Wichtiges / Tipp</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>telnet</code></td>
<td>Interaktive Schnellprüfung von TCP-Ports</td>
<td>
        SSH: <code>telnet 192.168.17.51 22</code><br>
        HTTP: <code>telnet 192.168.17.51 80</code>  
</td>
<td>Einfach & interaktiv; manuelles Senden von Text nötig; Nicht verschlüsselt</td>
</tr>
 
    <tr>
<td><code>nc</code> (netcat)</td>
<td>Scripting, Banner-Grabbing</td>
<td>
        HTTP: <code>nc 192.168.17.51 80 << EOF</code><br>
        Mit shell-here-document
</td>
<td>Sehr flexibel — gut für Skripte</td>
</tr>
 
    <tr>
<td><code>curl</code></td>
<td>HTTP(S) Header & Fingerprinting, Web-Service Tests</td>
<td>
        Kurz Header: <code>curl I http://192.168.17.51/</code><br>
</td>
<td>Ideal für Webserver: zeigt <code>Server:</code>-Header und TLS-Infos. Nutze <code>-I</code> um nur den Header zu erhalten</td>
</tr>
</tbody>
</table>


## Übung 2: netcat port scan
**Angabe:**   
Ermittle mit Hilfe von netcat welche Ports zwischen 1 und 30 in der Metasploitable VM geöffnet sind – Hinweis: dies geht in einer einzigen Kommandozeile. Recherchiere welche Dienste sich dort befinden.

Randnotitz: netcat wird auch gerne als das swiss army knife of network tools bezeichnet.

**Ausführung:**   
Befehl: `nc -zv -w1 192.168.17.51 1-30`   
 ![](https://github.com/user-attachments/assets/52ad1753-3e28-4770-9798-3a344f2766e0)

**Recherche:**   
<table>
<thead>
<tr>
<th>Port</th>
<th>Protokoll</th>
<th>Dienst / Anwendung</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>21</td>
<td>FTP (File Transfer Protocol)</td>
<td>Dateiübertragung (Kontrollverbindung)</td>
<td>Wird für die Steuerung von FTP-Verbindungen genutzt - dient dem Austausch von Dateien zwischen Client und Server.</td>
</tr>
<tr>
<td>22</td>
<td>SSH (Secure Shell)</td>
<td>Sichere Remote-Verbindung</td>
<td>Dient für verschlüsselte Verbindungen zu entfernten Systemen.</td>
</tr>
<tr>
<td>23</td>
<td>Telnet</td>
<td>Unverschlüsselte Remote-Verbindung</td>
<td>Wird für entfernte Terminalsitzungen verwendet, jedoch unsicher, da Daten im Klartext übertragen werden.</td>
</tr>
<tr>
<td>25</td>
<td>SMTP (Simple Mail Transfer Protocol)</td>
<td>E-Mail-Versand</td>
<td>Wird für das Senden von E-Mails zwischen Mailservern oder vom Mail-Client zum Server verwendet.</td>
</tr>
</tbody>
</table>

 
## Übung 3: nmap port scan
**Angabe:**  
Nach dem ping scan (und wenn nicht die Option -sn angegeben ist) führt nmap automatisch einen port scan auf allen gefundenen hosts aus. Dabei wird versucht alle offenen Ports eines Hosts zu finden. Das Ziel ist eine Liste der am Host laufenden Dienste zu erhalten.

Hinweise: Man kann eine einzelne IP Adresse angeben, dann wird nur diese gescannt, z.B.: nmap 192.168.178.42

Siehe List of TCP and UDP port numbers

Aufgaben:
- Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.
- Experimentiere mit den Optionen für (Victim ist Metasploitable VM):
  - Scannen aller möglichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?
  - Überspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
  - Service/Version Detection
  - OS Erkennung
  - Aggressive Scan
  - Timing/Speed
  - Ausgabe in Dateien
  - die Option --reason
  - nur die N häufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn)
- Führe weitere port scans durch, auf:
  - einem Kali Linux auf einem anderen Rechner
  - einem Windows System
  - dem Default Gateway im Labor Netz
- Was kann alles mit einem port scan herausgefunden werden? Dokumentiere!

### 1. Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.
Befehl: `nmap 192.168.17.51`   
Der Befehl prüft, ob das Ziel erreichbar ist. Wenn der Host als „up“ gemeldet wird, führt nmap den Portscan aus.   
![](https://github.com/user-attachments/assets/85ee0563-6150-49c6-b241-716339b37bd7)   

Analyse: Der Befehl führt Host-discovery durch, um zu prüfen, ob der Host up oder down ist. Dabei gibt er eine Zusammenfassung der gefundnen offenen Ports und der vermuteten Dienstbezeichnung aus, wenn der Port offen ist. Dann wird ein port-Scan der Top-1000 TCP-Ports ausgeführt.

### 2. Experimentiere mit den Optionen
#### Scannen aller möglichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?    
Dies ist mit der Option `-p-` möglich.   
![](https://github.com/user-attachments/assets/fa48c66f-e34b-4cd0-8b64-6914197c2fd0)

Mit der Option `-p-`werden alle 65.535 TCP-Ports gescannt statt der standardmäßig gescannten Top-1000.   
Das kann bei Metasploitable einen Unterschied machen, weil dort oft Dienste auf hohen, untypischen Ports laufen, die der Default-Scan überspringt.
