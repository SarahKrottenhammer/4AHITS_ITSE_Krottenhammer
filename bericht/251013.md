Klasse: 4AHITS   
Name: Sarah Krottenhammer   
Fach: ITSE    
Datum: 13.10.2025   

# Thema: Host discovery
## Übung 1: ping
VMS war schon wegen der vorherigen Übung im Bridged Mode.  

Angabe:    
Als host discovery (host scanning) versteht man den Vorgang um unbekannte Geräte in einem Netzwerk zu finden, bzw. festzustellen ob bekannte Geräte im Netzwerk erreichbar sind.
Das einfachste Werkzeug dafür ist ping.   
Verwende Kali und Metasploitable im Bridged Mode (Bridge ins Labor-Netzwerk)   
Experimentiere mit ping im Labor-Netzwerk (Metasploitable, Default Gateway, …)   
Recherchiere zu den Optionen von ping, erstelle ein kleines Cheat Sheet   
Welchen Netzwerkdienst verwendet der ping Dienst? Recherchiere wie Firewalls häufig mit ping umgehen.   

### 1. Experimentiere mit Ping im Labornetz
Metasploitable zu Kali und Default-Gateway:   
![](https://github.com/user-attachments/assets/1bad3c93-fb58-4035-9b91-2337c4af6673)

Kali zu Metasploitable und Default-Gateway:   
![](https://github.com/user-attachments/assets/2ae9034d-5524-425b-94a5-c628285a9013)

### 2. Recherchiere zu den Optionen von ping, erstelle ein kleines Cheat Sheet
| Option          | Beschreibung                                                  |  
| --------------- | ------------------------------------------------------------- | 
| `-c <Anzahl>`   | Anzahl der Ping-Pakete, die gesendet werden sollen            |  
| `-i <Sekunden>` | Wartezeit zwischen den Paketen (Standard 1 Sekunde)           |  
| `-t <TTL>`      | Setzt den Time-to-Live-Wert (wie viele Router passieren)      |  
| `-s <Größe>`    | Größe der zu sendenden Pakete in Bytes                        | 
| `-W <Sekunden>` | Timeout für die Antwort (wie lange auf Antwort gewartet wird) | 
| `-q`            | Quiet mode – zeigt nur eine Zusammenfassung am Ende           |  
| `-4`            | Erzwingt IPv4                                                 |  
| `-6`            | Erzwingt IPv6                                                 |  

TABELLE DAHEIM NOCH RICHTIG FÜPR HTML DARSTELLEN

### 3. Welchen Netzwerkdienst verwendet der ping Dienst? Recherchiere wie Firewalls häufig mit ping umgehen.
Ping nutzt das ICMP-Protokoll (Internet Control Message Protocol), um zu prüfen, ob ein Ziel erreichbar ist.

Firewalls reagieren auf Ping meist so:   
Sie blockieren oft ICMP-Pakete komplett oder teilweise, um Angriffe zu verhindern und Netzwerkinfos zu schützen.   
Manchmal lassen sie nur bestimmte IP-Adressen pingen oder begrenzen die Anzahl der Ping-Anfragen (Rate Limiting).   
Dadurch kann ein Ziel trotz Erreichbarkeit nicht auf Ping-Anfragen antworten.   

## Übung 2: ping script
Angabe: Schreibe ein shell Skript das automatisiert (Schleife) alle Hosts im subnet anpingt. Die Ausgabe soll so sein, dass man daraus die aktiven Hosts erkennen kann (für nicht aktive Hosts soll keine Ausgabe sein).    

FÜR BERICHT KOMMENTARE UMSCHREIBEN
Skript:    
```sh
#!/bin/bash
# scan_subnet_kali.sh - Ping alle Hosts im lokalen /24-Subnetz (Kali Linux)
# Ausgabe nur aktive Hosts mit Latenzzeit

TIMEOUT=1
PARALLEL=50

# Lokale IP-Adresse ermitteln (erste non-loopback IPv4-Adresse)
IP=$(ip -4 addr show scope global | grep inet | awk '{print $2}' | cut -d/ -f1 | head -n1)

if [[ -z "$IP" ]]; then
  echo "Keine lokale IPv4-Adresse gefunden! Bitte Subnetz als Parameter angeben."
  exit 1
fi

# Ersten drei Oktette extrahieren (für /24-Subnetz)
IFS='.' read -r o1 o2 o3 o4 <<< "$IP"
BASE="$o1.$o2.$o3"

echo "Scanne Subnetz: $BASE.0/24"

# Ping-Funktion für xargs
ping_host() {
  IP="$1"
  if ping -c1 -W $TIMEOUT -n "$IP" &>/dev/null; then
    LATENCY=$(ping -c1 -W $TIMEOUT -n "$IP" | grep 'time=' | awk -F'time=' '{print $2}' | awk '{print $1}')
    echo "$IP ist aktiv (Latenz: $LATENCY)"
  fi
}

export -f ping_host
export TIMEOUT

# Hosts von .1 bis .254 anpingen parallelisiert
seq 1 254 | xargs -P $PARALLEL -n1 -I{} bash -c 'ping_host '"$BASE".{}''
```


Ausgabe:   
![](https://github.com/user-attachments/assets/5d02aa6e-4273-4561-b2f6-9834a898f424)



