Klasse: 4AHITS   
Name: Sarah Krottenhammer   
Fach: ITSE    
Datum: 17.11.2025   

# Thema: Port probing und scanning
## Übung 3: nmap port scan
**Angabe:**  
Nach dem ping scan (und wenn nicht die Option -sn angegeben ist) führt nmap automatisch einen port scan auf allen gefundenen hosts aus. Dabei wird versucht alle offenen Ports eines Hosts zu finden. Das Ziel ist eine Liste der am Host laufenden Dienste zu erhalten.

Hinweise: Man kann eine einzelne IP Adresse angeben, dann wird nur diese gescannt, z.B.: nmap 192.168.178.42

Siehe List of TCP and UDP port numbers

Aufgaben:
- Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.
- Experimentiere mit den Optionen für (Victim ist Metasploitable VM):
  - Scannen aller möglichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?
  - Überspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
  - Service/Version Detection
  - OS Erkennung
  - Aggressive Scan
  - Timing/Speed
  - Ausgabe in Dateien
  - die Option --reason
  - nur die N häufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn)
- Führe weitere port scans durch, auf:
  - einem Kali Linux auf einem anderen Rechner
  - einem Windows System
  - dem Default Gateway im Labor Netz
- Was kann alles mit einem port scan herausgefunden werden? Dokumentiere!

### 1. Führe einen port scan auf die Metasploitable VM durch. Analysiere das Ergebnis.
Befehl: `nmap 192.168.17.51`   
Der Befehl prüft, ob das Ziel erreichbar ist. Wenn der Host als „up“ gemeldet wird, führt nmap den Portscan aus.   
![](https://github.com/user-attachments/assets/85ee0563-6150-49c6-b241-716339b37bd7)   

Analyse: Der Befehl führt Host-discovery durch, um zu prüfen, ob der Host up oder down ist. Dabei gibt er eine Zusammenfassung der gefundnen offenen Ports und der vermuteten Dienstbezeichnung aus, wenn der Port offen ist. Dann wird ein port-Scan der Top-1000 TCP-Ports ausgeführt.

### 2. Experimentiere mit den Optionen
#### Scannen aller möglichen Ports. Macht das bei Metasploitable, verglichen zum Default Verhalten, einen Unterschied?    
Dies ist mit der Option `-p-` möglich.   
![](https://github.com/user-attachments/assets/fa48c66f-e34b-4cd0-8b64-6914197c2fd0)

Mit der Option `-p-`werden alle 65.535 TCP-Ports gescannt statt der standardmäßig gescannten Top-1000.   
Das kann bei Metasploitable einen Unterschied machen, weil dort oft Dienste auf hohen, untypischen Ports laufen, die der Default-Scan überspringt.

#### Überspringen Ping-Scan/Host-Discovery. Warum kann diese Option notwendig sein?
Dies ist mit der Option `-Pn` möglich.    
![](https://github.com/user-attachments/assets/76544032-04d6-4de4-a5cc-b34df5b2df46)   
Mit -Pn wird dieser Schritt übersprungen und der Portscan wird in jedem Fall durchgeführt.
Dies ist notwendig in Umgebungen, in denen Ping- oder Discovery-Pakete gefiltert werden, z. B. in Firewalls   
Ohne -Pn könnte Nmap den Host fälschlich als „down“ melden, obwohl er hochgefahren ist.

#### Service/Version Detection
Option -sV   
 ![](https://github.com/user-attachments/assets/c53ce6f9-3f6e-49a3-bb78-520f1a4bcc0e)   
 Mit der Option -sV führt Nmap einen Dienst- und Versionsscan der offenen Ports durch. Dadurch erhält man nicht nur die Information, welche Ports offen sind, sondern auch welcher Dienst dahinter läuft und meist die genaue Version.

#### OS Erkennung
Option -O   
![](https://github.com/user-attachments/assets/db531291-2a24-409a-b314-2b85155f0771)    
Betriebssystem: Linux 2.6.9 - 2.6.33   
Mit der Option -O versucht Nmap, das Betriebssystem des Zielsystems zu bestimmen.   

####  Aggressive Scan
Option -A   
Kombiniert mehrere Techniken in einem Durchlauf:   
- -sV (Service-Versionen)
- -O (OS-Detection)
- Script Scans (NSE)
- Traceroute

#### Timing/Speed
Die Timing-Optionen steuern die Scan-Geschwindigkeit und Aggressivität.    
Option:   
-T0  bis -T5   

Beispiel mit -T4:   
![](https://github.com/user-attachments/assets/af502cc2-952c-490d-beca-46e0a7975253)   

- -T0 sehr langsam (stealthy)
- -T3 Default
- -T4 schneller (oft für Labore)
- -T5 maximal schnell (unzuverlässig + laut)

#### Ausgabe in Dateien
Nmap kann seine Ergebnisse in verschiedenen Formaten speichern. Diese Optionen heißen:
- -oN → normale Textausgabe
- -oG → „grepable“ Format
- -oX → XML-Ausgabe
- -oA → alle drei Formate gleichzeitig

Man muss nach der Option immer den Namen der Zieldatei angeben.   

Beispiel: Normale Textausgabe   
Speichert die „normale“ Terminalausgabe 1:1 in eine Datei.   
Befehl: `nmap -oN scan.txt  192.168.17.51`   
Inhalt Textdatei scan.txt:   
![](https://github.com/user-attachments/assets/612cb021-4235-40e6-b8fc-75855d9241cb)

#### die Option --reason
Nmap zeigt nicht nur den Status eines Ports (open, closed, filtered), sondern auch den Grund für diese Einstufung.   
![](https://github.com/user-attachments/assets/1babcab0-b956-4538-af2c-0fde0b7395c4)

#### nur die N häufigsten Ports scannen (dokumentiere den Geschwindigkeitsgewinn)
