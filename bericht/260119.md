Klasse: 4AHITS   
Name: Sarah Krottenhammer   
Fach: ITSE    
Datum: 19.01.2026

# very safe FTP backdoor

## Gemeinsame Übung: Metasploit
`msfconsole` -> zur Verwaltung von Modulen     
![](https://github.com/user-attachments/assets/fb9f97c4-7a4d-41f7-832b-c6fca5e67c13)   

`search -h`:   
man bekommt ansicht was das search alles kann

`search ssh`: man bekommt alle Module, die etwas mit ssh zu tun haben   
in Metasploitable sind Module in Gruppen eingeteilt   

![](https://github.com/user-attachments/assets/7c216738-4743-4c2e-902f-86f41ae7c2c8)   
![](https://github.com/user-attachments/assets/1ae2e7ce-06be-4754-b71e-d3ff77c9c3a4)   

wenn einem nur die Options interessieren:   
![](https://github.com/user-attachments/assets/8b0f888a-316d-4a76-a6f7-cbe8192255ad)   

Die IP-Adresse von Metasploitable ist 192.168.17.51     
Hier verwenden:   
![](https://github.com/user-attachments/assets/e37e2e11-4313-4a23-a48e-3226c2b8a587)   
-> IP-Adresse für RHOSTS ist gesetzt   

danach: run -> man bekommt Infos wie die Version,...   

Welchen Title hat die http-Seite, die hier verwendet wird?:   
![](https://github.com/user-attachments/assets/82ba00b3-f7c1-401a-90f1-2929119cbac8)
![](https://github.com/user-attachments/assets/5aae0707-0127-4064-ae28-a8f08d606970)

andere Beispiele anhand von orf und HTL Braunau:   
![](https://github.com/user-attachments/assets/c60a1217-132f-49d8-a3c0-07192526e8f9)

## Übung: msf Basics
### Angabe:
- Probiere alle besprochenen bzw. oben beschriebenen msf Befehle noch einmal aus und erstelle ein kurzes Cheatsheet zur Bedienung von metasploit.
- Der Befehl setg (set global) ist in unserem Zusammenhang auch sehr praktisch, recherchiere dazu.
- Recherchiere zu
  - msfvenom
  - Meterpreter
 
### Cheatsheet und setg:
#### Metasploitable starten:
<pre>
msfconsole
</pre>

#### Grundbefehle
<ul>
  <li><b>help</b> – Hilfe anzeigen</li>
  <li><b>search &lt;begriff&gt;</b> – Module suchen</li>
  <li><b>info &lt;modul&gt;</b> – Modulinformationen anzeigen</li>
  <li><b>use &lt;modul&gt;</b> – Modul auswählen</li>
  <li><b>back</b> – Modul verlassen</li>
  <li><b>exit</b> – Metasploit beenden</li>
</ul>

#### Modul-Bedienung
<ul>
  <li><b>options</b> – Zeigt konfigurierbare Optionen</li>
  <li><b>set OPTION WERT</b> – Option für aktuelles Modul setzen</li>
  <li><b>run</b> – Modul ausführen</li>
</ul>

#### set vs. setg
<ul>
  <li><b>set</b> – Gilt nur für das aktuelle Modul</li>
  <li><b>setg</b> – Setzt Optionen global für alle Module</li>
</ul>

<pre>
set RHOSTS 192.168.17.51
setg RHOSTS 192.168.17.51
</pre>

#### Auxiliary Scanner (Beispiele)
<ul>
  <li><b>SSH Version Scanner</b></li>
</ul>

<pre>
use auxiliary/scanner/ssh/ssh_version
run
</pre>

<ul>
  <li><b>HTTP Title Scanner</b></li>
</ul>

<pre>
use auxiliary/scanner/http/title
set RHOSTS www.orf.at
run
</pre>

### Recherche msfvenom
<ul>
  <li>Tool zur Erstellung von Payloads</li>
  <li>Wird für Shellcode und Testdateien verwendet</li>
</ul>

<pre>
msfvenom --list payloads
</pre>

<ul>
  <li><b>-p</b> – Payload</li>
  <li><b>LHOST / LPORT</b> – Zieladresse</li>
  <li><b>-f</b> – Ausgabeformat (exe, elf, raw)</li>
</ul>

### Recherche Meterpreter
Meterpreter ist ein Metasploit-Payload für die Kontrolle eines kompromittierten Systems nach einem erfolgreichen Exploit.
Ein Exploit ist ein Programm oder Code, der eine Sicherheitslücke ausnutzt, um Zugriff oder Kontrolle über ein System zu erlangen.

<ul>
  <li><b>sysinfo</b> – Systeminformationen</li>
  <li><b>getuid</b> – Aktueller Benutzer</li>
  <li><b>pwd</b> – Aktuelles Verzeichnis</li>
  <li><b>ls</b> – Dateien anzeigen</li>
  <li><b>ifconfig</b> – Netzwerkinformationen</li>
</ul>

## Übung nmap FTP scan
### Angabe:
Aufgabe: Wiederhole den nmap vuln scan auf den FTP Port. Verwende:
- Option --script=vuln (Diese Skripte sind “intrusive” und werden daher nicht über die Optionen -sC oder -A aufgerufen.)
- Option -p zum Einschränken auf den FTP Port

Findet nmap die Sicherheitslücke? Recherchiere mit Hilfe der CVE Nummer über diese Sicherheitslücke.

Recherchiere warum diese Skripte als intrusive bezeichnet werden, warum werden diese bei `-sC` oder `-A` nicht ausgeführt?

### Ausführung des nmap vuln scan   
![](https://github.com/user-attachments/assets/ceb08b3a-c68e-475d-b481-7b9776099e46)

Optionen:   
`--script=vuln` führt alle Vulnerability-Skripte aus   
`-p 21` beschränkt den Scan auf den FTP-Port (21)

### Sicherheitslücke   
![](https://github.com/user-attachments/assets/78873c0f-533f-47e8-8d07-0017bc31b7dc)    
-> man erkennt, dass nmap die Sicherheitslücke findet

### Recherche zur CVE-2011-2523
 Die Version vsFTPd 2.3.4 enthält eine eingebaute Backdoor, die während der Kompilierung eingeschleust wurde.

Meldet sich ein Benutzer mit einem Benutzernamen, der :) enthält, öffnet der FTP-Server automatisch eine Shell auf Port 6200.   
Dadurch ist unauthentifizierter Zugriff möglich.   

Auswirkungen:   
- Remote Command Execution
- Vollständige Kompromittierung des Systems
- Keine Authentifizierung notwendig

### Warum gelten vuln-Skripte als „intrusive“ und werden bei `-sC` oder `-A` nicht ausgeführt?
Intrusive bedeutet, dass die Skripte aktiv in das Zielsystem eingreifen und sich nicht nur passiv beobachtend verhalten.

Gründe:   
- Senden speziell präparierte Pakete
- Versuchen echte Exploit-Techniken
- Können Dienste zum Absturz bringen, verändern und Log-Einträge erzeugen

Sie testen also aktiv, ob eine Schwachstelle wirklich ausnutzbar ist.

`-sC` führt hingegen nur sichere Standard-Skripte aus und bewirkt keine aktiven Angriffe oder Veränderung des Zielsystems

`-A` beinhaltet OS Detection, Version Detection und Default Scripts, aber keine intrusive vuln-Skripte.

## Übung: msf FTP Version herausfinden
In dieser Übung findest du mit Hilfe eines msf Moduls ähnliche Informationen wie mit dem vorherigen nmap scan.   
Suche nach einem msf Modul mit dem die Version des FTP Servers ermittelt werden kann, du findest dies in der Kategorie `scanner`.   
Verwende dieses Modul um die auf Metasploitable installierte FTP Version herauszufinden.   

